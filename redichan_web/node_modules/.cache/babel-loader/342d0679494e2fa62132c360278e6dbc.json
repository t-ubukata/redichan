{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.detector = void 0;\nconst types_1 = require(\"./types\");\nconst keys = Object.keys(types_1.typeHandlers);\n// This map helps avoid validating for every single image type\nconst firstBytes = {\n  0x38: 'psd',\n  0x42: 'bmp',\n  0x44: 'dds',\n  0x47: 'gif',\n  0x49: 'tiff',\n  0x4d: 'tiff',\n  0x52: 'webp',\n  0x69: 'icns',\n  0x89: 'png',\n  0xff: 'jpg'\n};\nfunction detector(buffer) {\n  const byte = buffer[0];\n  if (byte in firstBytes) {\n    const type = firstBytes[byte];\n    if (type && types_1.typeHandlers[type].validate(buffer)) {\n      return type;\n    }\n  }\n  const finder = key => types_1.typeHandlers[key].validate(buffer);\n  return keys.find(finder);\n}\nexports.detector = detector;","map":{"version":3,"names":["Object","defineProperty","exports","value","detector","types_1","require","keys","typeHandlers","firstBytes","buffer","byte","type","validate","finder","key","find"],"sources":["/Users/admin/project/redichan_frontend/node_modules/image-size/dist/detector.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.detector = void 0;\nconst types_1 = require(\"./types\");\nconst keys = Object.keys(types_1.typeHandlers);\n// This map helps avoid validating for every single image type\nconst firstBytes = {\n    0x38: 'psd',\n    0x42: 'bmp',\n    0x44: 'dds',\n    0x47: 'gif',\n    0x49: 'tiff',\n    0x4d: 'tiff',\n    0x52: 'webp',\n    0x69: 'icns',\n    0x89: 'png',\n    0xff: 'jpg'\n};\nfunction detector(buffer) {\n    const byte = buffer[0];\n    if (byte in firstBytes) {\n        const type = firstBytes[byte];\n        if (type && types_1.typeHandlers[type].validate(buffer)) {\n            return type;\n        }\n    }\n    const finder = (key) => types_1.typeHandlers[key].validate(buffer);\n    return keys.find(finder);\n}\nexports.detector = detector;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,QAAQ,GAAG,KAAK,CAAC;AACzB,MAAMC,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGP,MAAM,CAACO,IAAI,CAACF,OAAO,CAACG,YAAY,CAAC;AAC9C;AACA,MAAMC,UAAU,GAAG;EACf,IAAI,EAAE,KAAK;EACX,IAAI,EAAE,KAAK;EACX,IAAI,EAAE,KAAK;EACX,IAAI,EAAE,KAAK;EACX,IAAI,EAAE,MAAM;EACZ,IAAI,EAAE,MAAM;EACZ,IAAI,EAAE,MAAM;EACZ,IAAI,EAAE,MAAM;EACZ,IAAI,EAAE,KAAK;EACX,IAAI,EAAE;AACV,CAAC;AACD,SAASL,QAAQ,CAACM,MAAM,EAAE;EACtB,MAAMC,IAAI,GAAGD,MAAM,CAAC,CAAC,CAAC;EACtB,IAAIC,IAAI,IAAIF,UAAU,EAAE;IACpB,MAAMG,IAAI,GAAGH,UAAU,CAACE,IAAI,CAAC;IAC7B,IAAIC,IAAI,IAAIP,OAAO,CAACG,YAAY,CAACI,IAAI,CAAC,CAACC,QAAQ,CAACH,MAAM,CAAC,EAAE;MACrD,OAAOE,IAAI;IACf;EACJ;EACA,MAAME,MAAM,GAAIC,GAAG,IAAKV,OAAO,CAACG,YAAY,CAACO,GAAG,CAAC,CAACF,QAAQ,CAACH,MAAM,CAAC;EAClE,OAAOH,IAAI,CAACS,IAAI,CAACF,MAAM,CAAC;AAC5B;AACAZ,OAAO,CAACE,QAAQ,GAAGA,QAAQ"},"metadata":{},"sourceType":"script"}